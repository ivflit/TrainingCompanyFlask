{% extends 'base.html' %}

{% block title %}Manage Students{% endblock %}

{% block content %}
<!-- Flash messages for form feedback -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="notification is-{{ category }}">
      {% for category, message in messages %}
        <p>{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<!-- Students List -->
<section class="section">
  <div class="container">
    <h1 class="title">Manage Students</h1>

    <!-- Display the list of students -->
    <table class="table is-striped is-hoverable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Age</th>
          <th>Company</th>
          <th>Level</th>
          <th>Stream</th>
        </tr>
      </thead>
      <tbody>
        {% for student in students %}
        <tr>
          <td>{{ student.name }}</td>
          <td>{{ student.age }}</td>
          <td>{{ student.company }}</td>
          <td>{{ student.level }}</td>
          <td>{{ student.stream }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<!-- Add Student Form -->
<section class="section">
  <div class="container">
    <h2 class="title">Add a New Student</h2>

    <!-- Form to Add New Student -->
    <form method="POST" action="{{ url_for('students_template') }}" class="box">
      <div class="field">
        <label class="label">Name</label>
        <div class="control">
          <input class="input" type="text" name="name" placeholder="Name" required>
        </div>
      </div>

      <div class="field">
        <label class="label">Age</label>
        <div class="control">
          <input class="input" type="number" name="age" placeholder="Age" required>
        </div>
      </div>

      <div class="field">
        <label class="label">Company</label>
        <div class="control">
          <input class="input" type="text" name="company" placeholder="Company" required>
        </div>
      </div>

      <div class="field">
        <label class="label">Level (3-6)</label>
        <div class="control">
          <input class="input" type="number" name="level" placeholder="Level (3-6)" required>
        </div>
      </div>

      <div class="field">
        <label class="label">Stream (e.g., development)</label>
        <div class="control">
          <input class="input" type="text" name="stream" placeholder="Stream" required>
        </div>
      </div>

      <div class="field">
        <div class="control">
          <button class="button is-primary" type="submit">Add Student</button>
        </div>
      </div>
    </form>
  </div>
</section>
{% endblock %}
